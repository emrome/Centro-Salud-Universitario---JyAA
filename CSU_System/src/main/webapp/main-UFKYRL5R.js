import{a as J}from"./chunk-ZA4B2GEQ.js";import{a as $}from"./chunk-CWAPT7CM.js";import{a as we}from"./chunk-XE3PXN5S.js";import"./chunk-YSNGU3H7.js";import"./chunk-ENHWNVRG.js";import"./chunk-GFHFXGHN.js";import"./chunk-UPCSMMPA.js";import{a as xe}from"./chunk-MOKCNWZY.js";import{a as Ne}from"./chunk-VVQ6IMPO.js";import{a as A,b as he,c as ve}from"./chunk-AUN2S5OM.js";import{a as K}from"./chunk-VWLE3RA7.js";import{b as _e,c as C,d as Fe,e as Pe,g as Ce,i as Ee,j as Se,p as ye,r as be}from"./chunk-4ZEEV3KU.js";import{a as pe,b as ce,c as fe,d as O,g as ge,i as T}from"./chunk-OLTWCF2P.js";import{$a as E,$b as de,Ea as B,F as ie,H as re,Ja as v,Jb as oe,Mb as le,Nb as ae,Pa as N,Pb as se,Q as z,Qa as p,Sa as W,Sb as me,Ua as n,Va as r,W as L,Wa as f,X as k,Y as M,Za as Y,_a as U,ac as ue,hb as d,ib as Z,j as X,qb as I,ua as s,v as ee,xb as ne,ya as V,z as te}from"./chunk-ILAX3XGE.js";import{a as G,b as q}from"./chunk-FDERIQAA.js";var Ie=(e,t)=>{let i=A.getToken();if(!i)return t(e);let m=e.clone({setHeaders:{Authorization:`Bearer ${i}`}});return t(m)};var b=()=>{let e=z(O);return A.isAuthenticated()?!0:(e.navigate([T.Public.Login]),!1)},x=()=>A.isAuthenticated();var R=e=>()=>{let t=z(O),i=A.getRole();return!i||!e.includes(i)?(t.navigate([T.Public.Root]),!1):!0},S=e=>()=>{let t=A.getRole();return!!t&&e.includes(t)};var D=e=>({"is-danger":e});function De(e,t){e&1&&(n(0,"div"),d(1,"Cargando..."),r())}function Le(e,t){e&1&&(n(0,"p",27),d(1," Este campo es obligatorio "),r())}function ke(e,t){e&1&&(n(0,"p",27),d(1," M\xEDnimo 2 caracteres "),r())}function Ve(e,t){e&1&&(n(0,"p",27),d(1," Este campo es obligatorio "),r())}function Ue(e,t){e&1&&(n(0,"p",27),d(1," M\xEDnimo 2 caracteres "),r())}function Oe(e,t){e&1&&(n(0,"p",27),d(1," Este campo es obligatorio "),r())}function He(e,t){e&1&&(n(0,"p",27),d(1," Deb\xE9s ser mayor de 18 a\xF1os "),r())}function Ge(e,t){e&1&&(n(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",28),d(4,"Matr\xEDcula"),r(),n(5,"div",12),f(6,"input",29),r()()(),n(7,"div",9)(8,"div",10)(9,"label",30),d(10,"Especialidad"),r(),n(11,"div",12),f(12,"input",31),r()()()())}function qe(e,t){e&1&&(n(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",32),d(4,"Organizaci\xF3n"),r(),n(5,"div",12),f(6,"input",33),r()()()())}function ze(e,t){e&1&&(n(0,"p",27),d(1," Este campo es obligatorio "),r())}function Be(e,t){e&1&&(n(0,"p",27),d(1," M\xEDnimo 2 caracteres "),r())}function je(e,t){if(e&1&&(n(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",34),d(4,"Cargo en CSU"),r(),n(5,"div",12),f(6,"input",35),r(),v(7,ze,2,0,"p",14)(8,Be,2,0,"p",14),r()()()),e&2){let i,m,l,u,c=E(2);s(6),p("ngClass",I(4,D,((i=c.profileForm.get("positionInCSU"))==null?null:i.invalid)&&(((i=c.profileForm.get("positionInCSU"))==null?null:i.touched)||((i=c.profileForm.get("positionInCSU"))==null?null:i.dirty)))),N("aria-invalid",(m=c.profileForm.get("positionInCSU"))!=null&&m.invalid&&((m=c.profileForm.get("positionInCSU"))!=null&&m.touched||(m=c.profileForm.get("positionInCSU"))!=null&&m.dirty)?"true":"false"),s(),p("ngIf",((l=c.profileForm.get("positionInCSU"))==null||l.errors==null?null:l.errors.required)&&(((l=c.profileForm.get("positionInCSU"))==null?null:l.touched)||((l=c.profileForm.get("positionInCSU"))==null?null:l.dirty))),s(),p("ngIf",((u=c.profileForm.get("positionInCSU"))==null||u.errors==null?null:u.errors.minlength)&&(((u=c.profileForm.get("positionInCSU"))==null?null:u.touched)||((u=c.profileForm.get("positionInCSU"))==null?null:u.dirty)))}}function We(e,t){if(e&1&&(n(0,"div",12)(1,"span",36),d(2),r()()),e&2){let i=E(2);s(2),Z(i.error)}}function Ye(e,t){e&1&&(n(0,"div",12)(1,"span",37),d(2,"Datos actualizados correctamente"),r()())}function Ze(e,t){if(e&1){let i=Y();n(0,"div",5)(1,"h2",6),d(2,"Datos personales"),r(),n(3,"form",7),U("ngSubmit",function(){L(i);let l=E();return k(l.submitProfile())}),n(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",11),d(8,"Nombre"),r(),n(9,"div",12),f(10,"input",13),r(),v(11,Le,2,0,"p",14)(12,ke,2,0,"p",14),r()(),n(13,"div",9)(14,"div",10)(15,"label",15),d(16,"Apellido"),r(),n(17,"div",12),f(18,"input",16),r(),v(19,Ve,2,0,"p",14)(20,Ue,2,0,"p",14),r()()(),n(21,"div",8)(22,"div",9)(23,"div",10)(24,"label",17),d(25,"Fecha de nacimiento"),r(),n(26,"div",12),f(27,"input",18),r(),v(28,Oe,2,0,"p",14)(29,He,2,0,"p",14),r()()(),v(30,Ge,13,0,"div",19)(31,qe,7,0,"div",19)(32,je,9,6,"div",19),n(33,"div",8)(34,"div",9)(35,"div",10)(36,"label",20),d(37,"Email"),r(),n(38,"div",12),f(39,"input",21),r()()(),n(40,"div",9)(41,"div",10)(42,"label",22),d(43,"Fecha registro"),r(),n(44,"div",12),f(45,"input",23),r()()()(),n(46,"div",24)(47,"div",12)(48,"button",25),d(49," Guardar "),r()(),v(50,We,3,1,"div",26)(51,Ye,3,0,"div",26),r()()()}if(e&2){let i,m,l,u,c,F,w,_,P,y,g,h,a=E();s(3),p("formGroup",a.profileForm),s(7),p("ngClass",I(22,D,((i=a.profileForm.get("firstName"))==null?null:i.invalid)&&(((i=a.profileForm.get("firstName"))==null?null:i.touched)||((i=a.profileForm.get("firstName"))==null?null:i.dirty)))),N("aria-invalid",(m=a.profileForm.get("firstName"))!=null&&m.invalid&&((m=a.profileForm.get("firstName"))!=null&&m.touched||(m=a.profileForm.get("firstName"))!=null&&m.dirty)?"true":"false"),s(),p("ngIf",((l=a.profileForm.get("firstName"))==null||l.errors==null?null:l.errors.required)&&(((l=a.profileForm.get("firstName"))==null?null:l.touched)||((l=a.profileForm.get("firstName"))==null?null:l.dirty))),s(),p("ngIf",((u=a.profileForm.get("firstName"))==null||u.errors==null?null:u.errors.minlength)&&(((u=a.profileForm.get("firstName"))==null?null:u.touched)||((u=a.profileForm.get("firstName"))==null?null:u.dirty))),s(6),p("ngClass",I(24,D,((c=a.profileForm.get("lastName"))==null?null:c.invalid)&&(((c=a.profileForm.get("lastName"))==null?null:c.touched)||((c=a.profileForm.get("lastName"))==null?null:c.dirty)))),N("aria-invalid",(F=a.profileForm.get("lastName"))!=null&&F.invalid&&((F=a.profileForm.get("lastName"))!=null&&F.touched||(F=a.profileForm.get("lastName"))!=null&&F.dirty)?"true":"false"),s(),p("ngIf",((w=a.profileForm.get("lastName"))==null||w.errors==null?null:w.errors.required)&&(((w=a.profileForm.get("lastName"))==null?null:w.touched)||((w=a.profileForm.get("lastName"))==null?null:w.dirty))),s(),p("ngIf",((_=a.profileForm.get("lastName"))==null||_.errors==null?null:_.errors.minlength)&&(((_=a.profileForm.get("lastName"))==null?null:_.touched)||((_=a.profileForm.get("lastName"))==null?null:_.dirty))),s(7),p("ngClass",I(26,D,((P=a.profileForm.get("birthDate"))==null?null:P.invalid)&&(((P=a.profileForm.get("birthDate"))==null?null:P.touched)||((P=a.profileForm.get("birthDate"))==null?null:P.dirty)))),N("max",a.maxBirthDate)("aria-invalid",(y=a.profileForm.get("birthDate"))!=null&&y.invalid&&((y=a.profileForm.get("birthDate"))!=null&&y.touched||(y=a.profileForm.get("birthDate"))!=null&&y.dirty)?"true":"false"),s(),p("ngIf",((g=a.profileForm.get("birthDate"))==null||g.errors==null?null:g.errors.required)&&(((g=a.profileForm.get("birthDate"))==null?null:g.touched)||((g=a.profileForm.get("birthDate"))==null?null:g.dirty))),s(),p("ngIf",((h=a.profileForm.get("birthDate"))==null||h.errors==null?null:h.errors.underAge)&&(((h=a.profileForm.get("birthDate"))==null?null:h.touched)||((h=a.profileForm.get("birthDate"))==null?null:h.dirty))),s(),p("ngIf",a.role==="HEALTHSTAFF"),s(),p("ngIf",a.role==="REPRESENTATIVE"),s(),p("ngIf",a.role==="ADMIN"),s(16),W("is-loading",a.saving),p("disabled",a.saving||a.profileForm.invalid),s(2),p("ngIf",a.error),s(),p("ngIf",a.success)}}function $e(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",52),r())}function Je(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",53),r())}function Ke(e,t){e&1&&(n(0,"p",27),d(1," Ingres\xE1 la contrase\xF1a actual "),r())}function Qe(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",52),r())}function Xe(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",53),r())}function et(e,t){e&1&&(n(0,"p",27),d(1," Ingres\xE1 la nueva contrase\xF1a "),r())}function tt(e,t){e&1&&(n(0,"p",27),d(1," La nueva contrase\xF1a debe tener al menos 8 caracteres "),r())}function it(e,t){e&1&&(n(0,"p",27),d(1," Debe incluir may\xFAscula, min\xFAscula, n\xFAmero y s\xEDmbolo "),r())}function rt(e,t){e&1&&(n(0,"p",27),d(1," No debe empezar ni terminar con espacios "),r())}function nt(e,t){e&1&&(n(0,"p",27),d(1," La nueva contrase\xF1a debe ser distinta a la actual "),r())}function ot(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",52),r())}function lt(e,t){e&1&&(M(),n(0,"svg",51),f(1,"path",53),r())}function at(e,t){e&1&&(n(0,"p",27),d(1," Confirm\xE1 la nueva contrase\xF1a "),r())}function st(e,t){e&1&&(n(0,"p",27),d(1," Las nuevas contrase\xF1as no coinciden "),r())}function mt(e,t){if(e&1&&(n(0,"div",12)(1,"span",36),d(2),r()()),e&2){let i=E(2);s(2),Z(i.pwdError)}}function pt(e,t){e&1&&(n(0,"div",12)(1,"span",37),d(2,"Contrase\xF1a actualizada"),r()())}function dt(e,t){if(e&1){let i=Y();n(0,"div",5)(1,"h2",6),d(2,"Cambiar contrase\xF1a"),r(),n(3,"form",7),U("ngSubmit",function(){L(i);let l=E();return k(l.submitPassword())}),n(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",38),d(8,"Contrase\xF1a actual"),r(),n(9,"div",39),f(10,"input",40),n(11,"span",41),U("click",function(){L(i);let l=E();return k(l.showOldPwd=!l.showOldPwd)}),v(12,$e,2,0,"svg",42)(13,Je,2,0,"svg",42),r()(),n(14,"div",43),v(15,Ke,2,0,"p",14),r()()(),n(16,"div",9)(17,"div",10)(18,"label",44),d(19,"Nueva contrase\xF1a"),r(),n(20,"div",39),f(21,"input",45),n(22,"span",41),U("click",function(){L(i);let l=E();return k(l.showNewPwd=!l.showNewPwd)}),v(23,Qe,2,0,"svg",42)(24,Xe,2,0,"svg",42),r()(),n(25,"div",46),v(26,et,2,0,"p",14)(27,tt,2,0,"p",14)(28,it,2,0,"p",14)(29,rt,2,0,"p",14)(30,nt,2,0,"p",14),r()()(),n(31,"div",9)(32,"div",10)(33,"label",47),d(34,"Confirmar nueva"),r(),n(35,"div",39),f(36,"input",48),n(37,"span",41),U("click",function(){L(i);let l=E();return k(l.showConfirmPwd=!l.showConfirmPwd)}),v(38,ot,2,0,"svg",42)(39,lt,2,0,"svg",42),r()(),n(40,"div",49),v(41,at,2,0,"p",14)(42,st,2,0,"p",14),r()()()(),n(43,"div",24)(44,"div",12)(45,"button",50),d(46," Cambiar "),r()(),v(47,mt,3,1,"div",26)(48,pt,3,0,"div",26),r()()()}if(e&2){let i,m,l,u,c,F,w,_,P,y,g,h,a,Q,o=E();s(3),p("formGroup",o.passwordForm),s(7),p("type",o.showOldPwd?"text":"password")("ngClass",I(29,D,((i=o.passwordForm.get("oldPassword"))==null?null:i.invalid)&&(((i=o.passwordForm.get("oldPassword"))==null?null:i.touched)||((i=o.passwordForm.get("oldPassword"))==null?null:i.dirty)))),N("aria-invalid",(m=o.passwordForm.get("oldPassword"))!=null&&m.invalid&&((m=o.passwordForm.get("oldPassword"))!=null&&m.touched||(m=o.passwordForm.get("oldPassword"))!=null&&m.dirty)?"true":"false"),s(2),p("ngIf",!o.showOldPwd),s(),p("ngIf",o.showOldPwd),s(2),p("ngIf",((l=o.passwordForm.get("oldPassword"))==null?null:l.hasError("required"))&&(((l=o.passwordForm.get("oldPassword"))==null?null:l.touched)||((l=o.passwordForm.get("oldPassword"))==null?null:l.dirty))),s(6),p("type",o.showNewPwd?"text":"password")("ngClass",I(31,D,((u=o.passwordForm.get("newPassword"))==null?null:u.invalid)&&(((u=o.passwordForm.get("newPassword"))==null?null:u.touched)||((u=o.passwordForm.get("newPassword"))==null?null:u.dirty))||o.passwordForm.hasError("sameAsOld")&&((u=o.passwordForm.get("newPassword"))==null?null:u.touched))),N("aria-invalid",(c=o.passwordForm.get("newPassword"))!=null&&c.invalid&&((c=o.passwordForm.get("newPassword"))!=null&&c.touched||(c=o.passwordForm.get("newPassword"))!=null&&c.dirty)||o.passwordForm.hasError("sameAsOld")&&((c=o.passwordForm.get("newPassword"))!=null&&c.touched)?"true":"false"),s(2),p("ngIf",!o.showNewPwd),s(),p("ngIf",o.showNewPwd),s(2),p("ngIf",((F=o.passwordForm.get("newPassword"))==null?null:F.hasError("required"))&&(((F=o.passwordForm.get("newPassword"))==null?null:F.touched)||((F=o.passwordForm.get("newPassword"))==null?null:F.dirty))),s(),p("ngIf",((w=o.passwordForm.get("newPassword"))==null?null:w.hasError("minlength"))&&(((w=o.passwordForm.get("newPassword"))==null?null:w.touched)||((w=o.passwordForm.get("newPassword"))==null?null:w.dirty))),s(),p("ngIf",((_=o.passwordForm.get("newPassword"))==null?null:_.hasError("weakPassword"))&&(((_=o.passwordForm.get("newPassword"))==null?null:_.touched)||((_=o.passwordForm.get("newPassword"))==null?null:_.dirty))),s(),p("ngIf",((P=o.passwordForm.get("newPassword"))==null?null:P.hasError("leadingTrailingSpace"))&&(((P=o.passwordForm.get("newPassword"))==null?null:P.touched)||((P=o.passwordForm.get("newPassword"))==null?null:P.dirty))),s(),p("ngIf",o.passwordForm.hasError("sameAsOld")&&((y=o.passwordForm.get("newPassword"))==null?null:y.touched)),s(6),p("type",o.showConfirmPwd?"text":"password")("ngClass",I(33,D,((g=o.passwordForm.get("confirmNewPassword"))==null?null:g.invalid)&&(((g=o.passwordForm.get("confirmNewPassword"))==null?null:g.touched)||((g=o.passwordForm.get("confirmNewPassword"))==null?null:g.dirty))||o.passwordForm.hasError("passwordMismatch")&&((g=o.passwordForm.get("confirmNewPassword"))==null?null:g.touched))),N("aria-invalid",(h=o.passwordForm.get("confirmNewPassword"))!=null&&h.invalid&&((h=o.passwordForm.get("confirmNewPassword"))!=null&&h.touched||(h=o.passwordForm.get("confirmNewPassword"))!=null&&h.dirty)||o.passwordForm.hasError("passwordMismatch")&&((h=o.passwordForm.get("confirmNewPassword"))!=null&&h.touched)?"true":"false"),s(2),p("ngIf",!o.showConfirmPwd),s(),p("ngIf",o.showConfirmPwd),s(2),p("ngIf",((a=o.passwordForm.get("confirmNewPassword"))==null?null:a.hasError("required"))&&(((a=o.passwordForm.get("confirmNewPassword"))==null?null:a.touched)||((a=o.passwordForm.get("confirmNewPassword"))==null?null:a.dirty))),s(),p("ngIf",o.passwordForm.hasError("passwordMismatch")&&((Q=o.passwordForm.get("confirmNewPassword"))==null?null:Q.touched)),s(3),W("is-loading",o.savingPwd),p("disabled",o.savingPwd||o.passwordForm.invalid),s(2),p("ngIf",o.pwdError),s(),p("ngIf",o.pwdSuccess)}}var H=class e{constructor(t,i,m,l,u){this.fb=t;this.profile=i;this.auth=m;this.router=l;this.route=u}role;profileForm;passwordForm;loading=!0;saving=!1;savingPwd=!1;error=null;pwdError=null;pwdSuccess=!1;success=!1;showOldPwd=!1;showNewPwd=!1;showConfirmPwd=!1;healthLicense;healthSpecialty;orgName;specialties=Ne;returnUrl=null;roleHome={ADMIN:"/admin",HEALTHSTAFF:"/health",REPRESENTATIVE:"/representatives"};ngOnInit(){this.returnUrl=this.route.snapshot.queryParamMap.get("returnUrl"),this.passwordForm=this.fb.group({oldPassword:["",C.required],newPassword:["",[C.required,C.minLength(8),K.strongPassword(),t=>t.value&&t.value.trim()===t.value?null:{leadingTrailingSpace:!0}]],confirmNewPassword:["",C.required]},{validators:[this.matchPasswords("newPassword","confirmNewPassword"),this.notEqual("oldPassword","newPassword")]}),this.passwordForm.get("newPassword")?.valueChanges.subscribe(()=>{this.passwordForm.get("confirmNewPassword")?.updateValueAndValidity({onlySelf:!0})}),this.profile.getMe().subscribe({next:t=>{this.role=t.type,this.role==="HEALTHSTAFF"?(this.healthLicense=t.data?.license??"",this.healthSpecialty=t.data?.specialty??""):this.role==="REPRESENTATIVE"&&(this.orgName=t.data?.organizationName??""),this.buildProfileForm(t.data),this.loading=!1},error:t=>{this.error="No se pudo cargar el perfil",this.loading=!1}})}buildProfileForm(t){let i={firstName:[t.firstName||"",[C.required,C.minLength(2)]],lastName:[t.lastName||"",[C.required,C.minLength(2)]],birthDate:[t.birthDate||"",[C.required,K.minAge(18)]],email:[{value:t.email,disabled:!0}],registrationDate:[{value:t.registrationDate,disabled:!0}],enabled:[{value:t.enabled,disabled:!0}],id:[t.id]};if(this.role==="ADMIN")this.profileForm=this.fb.group(q(G({},i),{positionInCSU:[t.positionInCSU||"",[C.required,C.minLength(2)]]}));else if(this.role==="HEALTHSTAFF"){let m=this.specialties.find(l=>l.value===t.specialty)?.label??t.specialty;this.profileForm=this.fb.group(q(G({},i),{license:[{value:t.license??"",disabled:!0}],specialty:[{value:m??"",disabled:!0}]}))}else this.role==="REPRESENTATIVE"?this.profileForm=this.fb.group(q(G({},i),{organizationName:[{value:t.organizationName??"",disabled:!0}]})):this.profileForm=this.fb.group(i)}submitProfile(){if(this.profileForm.invalid){this.profileForm.markAllAsTouched();return}this.saving=!0,this.error=null,this.success=!1;let t=G({},this.profileForm.getRawValue());this.profile.updateMe(t).pipe(ie(()=>this.auth.loadCurrentUser()),re(()=>{this.success=!0}),ee(i=>(this.error="No se pudo guardar el perfil",X(null))),te(()=>{this.saving=!1})).subscribe({next:()=>{let i=this.safeReturn(this.returnUrl);if(i){this.router.navigateByUrl(i);return}switch(this.role){case"ADMIN":this.router.navigateByUrl(T.Admin.Root);break;case"HEALTHSTAFF":this.router.navigateByUrl(T.HealthStaff.Root);break;case"REPRESENTATIVE":this.router.navigateByUrl(T.Representative.Root);break;default:this.router.navigateByUrl("/");break}}})}get maxBirthDate(){return xe.isoDateTodayMinusYears(18)}submitPassword(){if(this.pwdError=null,this.pwdSuccess=!1,this.passwordForm.invalid){this.passwordForm.markAllAsTouched();let l=this.passwordForm.errors||{};l.passwordMismatch?this.pwdError="Las nuevas contrase\xF1as no coinciden":l.sameAsOld?this.pwdError="La nueva contrase\xF1a debe ser distinta a la actual":this.passwordForm.get("oldPassword")?.hasError("required")?this.pwdError="Ingres\xE1 la contrase\xF1a actual":this.passwordForm.get("newPassword")?.hasError("required")?this.pwdError="Ingres\xE1 la nueva contrase\xF1a":this.passwordForm.get("newPassword")?.hasError("minlength")?this.pwdError="La nueva contrase\xF1a debe tener al menos 8 caracteres":this.passwordForm.get("newPassword")?.hasError("weakPassword")?this.pwdError="Debe incluir may\xFAscula, min\xFAscula, n\xFAmero y s\xEDmbolo":this.passwordForm.get("confirmNewPassword")?.hasError("required")?this.pwdError="Confirm\xE1 la nueva contrase\xF1a":this.pwdError="Revis\xE1 los campos";return}let{oldPassword:t,newPassword:i,confirmNewPassword:m}=this.passwordForm.value;this.savingPwd=!0,this.profile.changePassword({oldPassword:t,newPassword:i,confirmNewPassword:m}).subscribe({next:l=>{this.savingPwd=!1,this.pwdSuccess=!0,this.passwordForm.reset(),this.showOldPwd=this.showNewPwd=this.showConfirmPwd=!1},error:l=>{this.savingPwd=!1,l?.status===401?this.pwdError="La contrase\xF1a actual es incorrecta":l?.status===400?(l.error?.message||"").toLowerCase().includes("weak")?this.pwdError="La nueva contrase\xF1a no cumple los requisitos":this.pwdError=l.error?.message||"Datos inv\xE1lidos":this.pwdError="Error al cambiar la contrase\xF1a"}})}matchPasswords(t,i){return m=>{let l=m.get(t)?.value,u=m.get(i)?.value;return!l||!u||l===u?null:{passwordMismatch:!0}}}notEqual(t,i){return m=>{let l=m.get(t)?.value,u=m.get(i)?.value;return!l||!u?null:l===u?{sameAsOld:!0}:null}}safeReturn(t){if(!t)return null;try{let i=new URL(t,window.location.origin),m=i.origin===window.location.origin,l=i.pathname.startsWith("/");return m&&l?i.pathname+i.search+i.hash:null}catch{return null}}static \u0275fac=function(i){return new(i||e)(V(ye),V(he),V(ve),V(O),V(ce))};static \u0275cmp=B({type:e,selectors:[["app-profile"]],decls:7,vars:3,consts:[[1,"section"],[1,"container"],[1,"title"],[4,"ngIf"],["class","box",4,"ngIf"],[1,"box"],[1,"subtitle"],["novalidate","",3,"ngSubmit","formGroup"],[1,"columns"],[1,"column"],[1,"field"],["for","firstName",1,"label"],[1,"control"],["id","firstName","formControlName","firstName","autocomplete","given-name",1,"input",3,"ngClass"],["class","help is-danger",4,"ngIf"],["for","lastName",1,"label"],["id","lastName","formControlName","lastName","autocomplete","family-name",1,"input",3,"ngClass"],["for","birthDate",1,"label"],["id","birthDate","type","date","formControlName","birthDate",1,"input",3,"ngClass"],["class","columns",4,"ngIf"],["for","email",1,"label"],["id","email","formControlName","email","autocomplete","email","readonly","",1,"input"],["for","registrationDate",1,"label"],["id","registrationDate","formControlName","registrationDate","readonly","",1,"input"],[1,"field","is-grouped","is-align-items-center"],["type","submit",1,"button","is-primary",3,"disabled"],["class","control",4,"ngIf"],[1,"help","is-danger"],["for","license",1,"label"],["id","license","formControlName","license",1,"input"],["for","specialty",1,"label"],["id","specialty","formControlName","specialty",1,"input"],["for","organizationName",1,"label"],["id","organizationName","formControlName","organizationName",1,"input"],["for","positionInCSU",1,"label"],["id","positionInCSU","formControlName","positionInCSU",1,"input",3,"ngClass"],[1,"tag","is-danger"],[1,"tag","is-success"],["for","oldPassword",1,"label"],[1,"control","has-icons-right"],["id","oldPassword","formControlName","oldPassword","autocomplete","current-password",1,"input",3,"type","ngClass"],[1,"icon","is-small","is-right",2,"cursor","pointer","pointer-events","auto",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","20","height","20",4,"ngIf"],[1,"stack-helps","stack-helps--old"],["for","newPassword",1,"label"],["id","newPassword","formControlName","newPassword","autocomplete","new-password",1,"input",3,"type","ngClass"],[1,"stack-helps","stack-helps--new"],["for","confirmNewPassword",1,"label"],["id","confirmNewPassword","formControlName","confirmNewPassword","autocomplete","new-password",1,"input",3,"type","ngClass"],[1,"stack-helps","stack-helps--confirm"],["type","submit",1,"button","is-link",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","20","height","20"],["fill","currentColor","d","M12 5c5 0 9.27 3.11 11 7-1.73 3.89-6 7-11 7S2.73 15.89 1 12C2.73 8.11 7 5 12 5zm0 2C8.14 7 4.79 9.29 3.35 12 4.79 14.71 8.14 17 12 17s7.21-2.29 8.65-5C19.21 9.29 15.86 7 12 7zm0 2a3 3 0 110 6 3 3 0 010-6z"],["fill","currentColor","d","M2 5.27L3.28 4l16.97 16.97-1.27 1.27-2.56-2.56A12.1 12.1 0 0112 19c-5 0-9.27-3.11-11-7a12.9 12.9 0 013.74-4.67L2 5.27zM7.11 7.38A10.2 10.2 0 004.35 12c1.44 2.71 4.79 5 7.65 5 1.36 0 2.64-.3 3.79-.85l-1.67-1.67c-.33.13-.68.2-1.05.2a3 3 0 01-3-3c0-.37.07-.72.2-1.05L7.11 7.38zM12 7c.9 0 1.76.16 2.55.46l-1.54 1.54A2.98 2.98 0 0012 9a3 3 0 00-3 3c0 .46.11.89.3 1.27l-1.5-1.5A10.2 10.2 0 0112 7zm7.65 5c-.49.91-1.13 1.75-1.9 2.5l-1.42-1.42A5 5 0 0017 12a5 5 0 00-5-5c-.38 0-.75.04-1.1.12L9.24 5.45A12.3 12.3 0 0112 5c5 0 9.27 3.11 11 7-.4.9-.92 1.74-1.52 2.5l-1.83-1.83z"]],template:function(i,m){i&1&&(n(0,"section",0)(1,"div",1)(2,"h1",2),d(3,"Mi perfil"),r(),v(4,De,2,0,"div",3)(5,Ze,52,28,"div",4)(6,dt,49,35,"div",4),r()()),i&2&&(s(4),p("ngIf",m.loading),s(),p("ngIf",m.profileForm),s(),p("ngIf",m.passwordForm))},dependencies:[me,ae,se,be,Ce,_e,Fe,Pe,Ee,Se],styles:[".stack-helps[_ngcontent-%COMP%]{display:grid;gap:.15rem;margin-top:.3rem}.stack-helps--old[_ngcontent-%COMP%]{min-height:1.6rem}.stack-helps--new[_ngcontent-%COMP%]{min-height:3.6rem}.stack-helps--confirm[_ngcontent-%COMP%]{min-height:2rem}.help.is-danger[_ngcontent-%COMP%]{font-size:.85rem;line-height:1.25;margin:0}.input.is-danger[_ngcontent-%COMP%]{box-shadow:none}"]})};var Ae=[{path:"",loadChildren:()=>import("./chunk-6J32PFM2.js").then(e=>e.publicRoutes)},{path:"profile",component:$,canMatch:[x,S(["Admin"])],canActivate:[b,R(["Admin"])],children:[{path:"",component:H}]},{path:"profile",component:J,canMatch:[x,S(["HealthStaff"])],canActivate:[b,R(["HealthStaff"])],children:[{path:"",component:H}]},{path:"profile",component:we,canMatch:[x,S(["SocialOrgRepresentative"])],canActivate:[b,S(["SocialOrgRepresentative"])],children:[{path:"",component:H}]},{path:"admin",canMatch:[x,S(["Admin"])],canActivate:[b,R(["Admin"])],loadChildren:()=>import("./chunk-J6LGE5AH.js").then(e=>e.adminRoutes)},{path:"representative",canMatch:[x,S(["SocialOrgRepresentative"])],canActivate:[b,R(["SocialOrgRepresentative"])],loadChildren:()=>import("./chunk-YDSV5OZW.js").then(e=>e.representativeRoutes)},{path:"health-staff",canMatch:[x,S(["HealthStaff"])],canActivate:[b,R(["HealthStaff"])],loadChildren:()=>import("./chunk-5HIVLAC2.js").then(e=>e.healthStaffRoutes)},{path:"analytics",component:$,canMatch:[x,S(["Admin"])],canActivate:[b,R(["Admin"])],children:[{path:"",loadChildren:()=>import("./chunk-ZXJL3B5B.js").then(e=>e.analyticsRoutes)}]},{path:"analytics",component:J,canMatch:[x,S(["HealthStaff"])],canActivate:[b,R(["HealthStaff"])],children:[{path:"",loadChildren:()=>import("./chunk-ZXJL3B5B.js").then(e=>e.analyticsRoutes)}]},{path:"**",redirectTo:"/"}];var Te={providers:[ne({eventCoalescing:!0}),ge(Ae),{provide:oe,useClass:le},de(ue([Ie]))]};var j=class e{title="csu-system-frontend";static \u0275fac=function(i){return new(i||e)};static \u0275cmp=B({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,m){i&1&&f(0,"router-outlet")},dependencies:[fe],encapsulation:2})};pe(j,Te).catch(e=>console.error(e));
