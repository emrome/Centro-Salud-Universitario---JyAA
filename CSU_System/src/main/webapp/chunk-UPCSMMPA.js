import{b as w,c as H}from"./chunk-AUN2S5OM.js";import{d as y,i as l}from"./chunk-OLTWCF2P.js";import{$a as m,Ea as h,Ja as g,Pb as A,Qa as b,Qb as I,Sb as k,Ua as n,Va as i,W as f,Wa as a,X as p,Xa as C,Ya as P,Za as x,_a as d,gb as v,hb as c,jb as M,kb as O,sb as R,tb as T,ua as u,vb as E,y as S,ya as _}from"./chunk-ILAX3XGE.js";function L(r,t){if(r&1&&(C(0),n(1,"span",14),c(2),i(),P()),r&2){let e=t.ngIf;u(2),O("",e.firstName," ",e.lastName,"")}}function U(r,t){r&1&&(n(0,"span",14),c(1,"..."),i())}function j(r,t){if(r&1){let e=x();C(0),n(1,"div",7),d("click",function(){f(e);let s=m();return p(s.openProfile())}),n(2,"div",8),a(3,"i",9),i(),g(4,L,3,2,"ng-container",6),R(5,"async"),g(6,U,2,0,"ng-template",null,1,E),i(),n(8,"div",10)(9,"button",11),d("click",function(){f(e);let s=m();return p(s.logout())}),n(10,"span",12),a(11,"i",13),i(),n(12,"span"),c(13,"Salir"),i()()(),P()}if(r&2){let e=v(7),o=m();u(4),b("ngIf",T(5,2,o.user$))("ngIfElse",e)}}function z(r,t){if(r&1){let e=x();C(0),n(1,"div",16)(2,"button",17),d("click",function(){f(e);let s=m(2);return p(s.login())}),n(3,"span",12),a(4,"i",18),i(),n(5,"span"),c(6,"Ingresar"),i()(),n(7,"button",17),d("click",function(){f(e);let s=m(2);return p(s.register())}),n(8,"span",12),a(9,"i",19),i(),n(10,"span"),c(11,"Registrarse"),i()()(),P()}}function B(r,t){if(r&1&&g(0,z,12,0,"ng-container",15),r&2){let e=m();b("ngIf",!e.isAuthenticated&&!e.isPublicRoute)}}var N=class r{constructor(t,e,o){this.auth=t;this.profile=e;this.router=o}user$;ngOnInit(){this.user$=this.auth.currentUser$,this.isAuthenticated&&this.auth.loadCurrentUser().subscribe()}goToDashboard(){let t=this.normalizeRole(this.auth.getUserRole());if(t){this.navigateToDashboard(t);return}this.profile.getMe().pipe(S(1)).subscribe({next:e=>{let o=this.normalizeRole(e?.type);this.navigateToDashboard(o)},error:()=>this.router.navigate([l.Public.Root])})}navigateToDashboard(t){let e=this.getDashboardRouteByRole(t||void 0);this.router.navigate([e??l.Public.Root])}getDashboardRouteByRole(t){switch(t){case"ADMIN":return l.Admin.Dashboard;case"HEALTHSTAFF":return l.HealthStaff.Dashboard;case"REPRESENTATIVE":return l.Representative.Dashboard;default:return null}}normalizeRole(t){if(!t)return null;if(t==="Admin")return"ADMIN";if(t==="HealthStaff")return"HEALTHSTAFF";if(t==="SocialOrgRepresentative")return"REPRESENTATIVE";let e=String(t).toUpperCase();return e==="ADMIN"?"ADMIN":e==="HEALTHSTAFF"||e==="HEALTH"?"HEALTHSTAFF":e==="REPRESENTATIVE"||e==="REP"?"REPRESENTATIVE":null}get isAuthenticated(){return this.auth.isAuthenticated()}logout(){this.auth.logout()}login(){this.router.navigate([l.Public.Login])}register(){this.router.navigate([l.Public.Register])}openProfile(){this.router.navigate(["/profile"])}get isPublicRoute(){return[l.Public.Login,l.Public.Register].includes(this.router.url)}static \u0275fac=function(e){return new(e||r)(_(H),_(w),_(y))};static \u0275cmp=h({type:r,selectors:[["app-header"]],decls:7,vars:2,consts:[["notLoggedIn",""],["loadingName",""],[1,"header"],["href","/",1,"header-left"],["src","assets/images/white-logo-unlp-text.png","alt","UNLP",1,"logo"],[1,"header-right"],[4,"ngIf","ngIfElse"],[1,"user-placeholder",2,"cursor","pointer",3,"click"],[1,"user-avatar"],[1,"fas","fa-user-circle"],[1,"user-actions"],[1,"button","is-light",3,"click"],[1,"icon"],[1,"fas","fa-sign-out-alt"],[1,"user-name"],[4,"ngIf"],[1,"not-authenticated"],[1,"button","is-primary",3,"click"],[1,"fas","fa-sign-in-alt"],[1,"fas","fa-user-plus"]],template:function(e,o){if(e&1&&(n(0,"header",2)(1,"a",3),a(2,"img",4),i(),n(3,"div",5),g(4,j,14,4,"ng-container",6)(5,B,1,1,"ng-template",null,0,E),i()()),e&2){let s=v(6);u(4),b("ngIf",!o.isPublicRoute&&o.isAuthenticated)("ngIfElse",s)}},dependencies:[k,A,I],styles:[".header[_ngcontent-%COMP%]{background-color:#02535e;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;box-shadow:0 2px 4px #0000001a}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:56px;max-height:100%;object-fit:contain}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-placeholder[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;background-color:#478c7f;border-radius:50%;display:flex;box-shadow:0 2px 4px #0000001a}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-placeholder[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;margin-right:1rem;text-transform:uppercase}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .not-authenticated[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:#478c7f;color:#fff;border:none;padding:.5rem 1rem;border-radius:.25rem;cursor:pointer;transition:background-color .3s}.header[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#008c79}"]})};var D=class r{currentYear=new Date().getFullYear();static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-footer"]],decls:17,vars:1,consts:[[1,"asis-footer"],[1,"asis-footer-content"],[1,"social-links","is-flex","is-justify-content-center","is-align-items-center"],["href","https://unlp.edu.ar/redintersalud/","target","_blank","aria-label","Facebook",1,"mx-2"],[1,"fa","fa-globe"],["href","https://www.facebook.com/prosecretariasalud.unlp","target","_blank","aria-label","Facebook",1,"mx-2"],[1,"fab","fa-facebook","fa-lg"],["href","https://twitter.com/SaludUNLP","target","_blank","aria-label","Twitter",1,"mx-2"],[1,"fab","fa-twitter","fa-lg"],["href","https://www.instagram.com/prosecretariasalud.unlp/","target","_blank","aria-label","Twitter",1,"mx-2"],[1,"fab","fa-instagram","fa-lg"],["href","mailto:salud@presi.unlp.edu.ar","aria-label","Correo electr\xF3nico",1,"mx-2"],[1,"fas","fa-envelope","fa-lg"]],template:function(e,o){e&1&&(n(0,"footer",0)(1,"div",1)(2,"p"),c(3,"Sistema ASIS \u2013 UNLP"),i(),n(4,"p"),c(5),i(),n(6,"div",2)(7,"a",3),a(8,"i",4),i(),n(9,"a",5),a(10,"i",6),i(),n(11,"a",7),a(12,"i",8),i(),n(13,"a",9),a(14,"i",10),i(),n(15,"a",11),a(16,"i",12),i()()()()),e&2&&(u(5),M("Villa Arg\xFCello, Berisso \xB7 \xA9 ",o.currentYear,""))},styles:[".asis-footer[_ngcontent-%COMP%]{background-color:#02535e;color:#fff;font-size:.8rem;padding:1rem 0}.asis-footer[_ngcontent-%COMP%]   .asis-footer-content[_ngcontent-%COMP%]{text-align:center}.asis-footer[_ngcontent-%COMP%]   .asis-footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;transition:color .2s ease}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00bfa5}"]})};export{N as a,D as b};
