import{a as _,c as V}from"./chunk-AUN2S5OM.js";import{b as E,c as g,d as F,e as T,g as A,i as I,j as N,n as M,p as G,r as z}from"./chunk-4ZEEV3KU.js";import{d as R,i as d}from"./chunk-OLTWCF2P.js";import{$a as h,Ea as S,Ja as v,Pa as C,Pb as y,Qa as l,Sb as L,Ua as e,Va as i,W as w,Wa as m,X as b,Y as f,Za as k,_a as p,hb as s,jb as x,ua as a,ya as u}from"./chunk-ILAX3XGE.js";import"./chunk-FDERIQAA.js";function D(r,n){if(r&1){let o=k();e(0,"div",20)(1,"button",21),p("click",function(){w(o);let c=h();return b(c.error=null)}),i(),s(2),i()}if(r&2){let o=h();a(2),x(" ",o.error," ")}}function P(r,n){r&1&&(f(),e(0,"svg",22),m(1,"path",23),i())}function j(r,n){r&1&&(f(),e(0,"svg",22),m(1,"path",24),i())}var B=class r{constructor(n,o,t){this.fb=n;this.authService=o;this.router=t;this.form=this.fb.group({email:["",[g.required,g.email]],password:["",g.required]})}form;error=null;onSubmit(){this.form.invalid||this.authService.login(this.form.value).subscribe({next:n=>{switch(_.setToken(n.token),_.getRole()){case"Admin":this.router.navigate([d.Admin.Root]);break;case"HealthStaff":this.router.navigate([d.HealthStaff.Root]);break;case"SocialOrgRepresentative":this.router.navigate([d.Representative.Root]);break}},error:n=>{this.error=typeof n.error=="string"&&n.error||n.error?.message||n.error?.error||n.message||"Error inesperado al iniciar sesi\xF3n"}})}passwordVisible=!1;togglePassword(){this.passwordVisible=!this.passwordVisible}goToRegister(){this.router.navigate([d.Public.Register])}static \u0275fac=function(o){return new(o||r)(u(G),u(V),u(R))};static \u0275cmp=S({type:r,selectors:[["app-login"]],decls:31,vars:7,consts:[[1,"section","is-flex","is-align-items-center","is-justify-content-center",2,"min-height","calc(100vh - 200px)"],[1,"box",2,"max-width","400px","width","100%"],[1,"title","has-text-centered"],["class","notification is-danger is-light",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"label"],[1,"control","has-icons-left"],["type","email","formControlName","email","placeholder","ejemplo@correo.com","required","",1,"input"],[1,"icon","is-small","is-left"],[1,"fas","fa-envelope"],[1,"control","has-icons-left","has-icons-right"],["formControlName","password","placeholder","*********","required","","autocomplete","current-password",1,"input",3,"type"],[1,"fas","fa-lock"],["role","button","tabindex","0",1,"icon","is-small","is-right",2,"cursor","pointer","pointer-events","auto",3,"click","keydown.enter","keydown.space"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","20","height","20","aria-hidden","true",4,"ngIf"],[1,"field","mt-2","has-text-centered"],["type","button",1,"button","is-text","is-small","ml-2",3,"click"],[1,"field","mt-4"],[1,"button","is-primary","is-fullwidth",3,"disabled"],[1,"notification","is-danger","is-light"],[1,"delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","20","height","20","aria-hidden","true"],["fill","currentColor","d","M12 5c5 0 9.27 3.11 11 7-1.73 3.89-6 7-11 7S2.73 15.89 1 12C2.73 8.11 7 5 12 5zm0 2C8.14 7 4.79 9.29 3.35 12 4.79 14.71 8.14 17 12 17s7.21-2.29 8.65-5C19.21 9.29 15.86 7 12 7zm0 2a3 3 0 110 6 3 3 0 010-6z"],["fill","currentColor","d","M2 5.27L3.28 4l16.97 16.97-1.27 1.27-2.56-2.56A12.1 12.1 0 0112 19c-5 0-9.27-3.11-11-7a12.9 12.9 0 013.74-4.67L2 5.27zM7.11 7.38A10.2 10.2 0 004.35 12c1.44 2.71 4.79 5 7.65 5 1.36 0 2.64-.3 3.79-.85l-1.67-1.67c-.33.13-.68.2-1.05.2a3 3 0 01-3-3c0-.37.07-.72.2-1.05L7.11 7.38zM12 7c.9 0 1.76.16 2.55.46l-1.54 1.54A2.98 2.98 0 0012 9a3 3 0 00-3 3c0 .46.11.89.3 1.27l-1.5-1.5A10.2 10.2 0 0112 7zm7.65 5c-.49.91-1.13 1.75-1.9 2.5l-1.42-1.42A5 5 0 0017 12a5 5 0 00-5-5c-.38 0-.75.04-1.1.12L9.24 5.45A12.3 12.3 0 0112 5c5 0 9.27 3.11 11 7-.4.9-.92 1.74-1.52 2.5l-1.83-1.83z"]],template:function(o,t){o&1&&(e(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Iniciar sesi\xF3n"),i(),v(4,D,3,1,"div",3),e(5,"form",4),p("ngSubmit",function(){return t.onSubmit()}),e(6,"div",5)(7,"label",6),s(8,"Correo electr\xF3nico"),i(),e(9,"div",7),m(10,"input",8),e(11,"span",9),m(12,"i",10),i()()(),e(13,"div",5)(14,"label",6),s(15,"Contrase\xF1a"),i(),e(16,"div",11),m(17,"input",12),e(18,"span",9),m(19,"i",13),i(),e(20,"span",14),p("click",function(){return t.togglePassword()})("keydown.enter",function(){return t.togglePassword()})("keydown.space",function(){return t.togglePassword()}),v(21,P,2,0,"svg",15)(22,j,2,0,"svg",15),i()()(),e(23,"div",16)(24,"span"),s(25,"\xBFTodav\xEDa no tienes cuenta?"),i(),e(26,"button",17),p("click",function(){return t.goToRegister()}),s(27,"Registrate"),i()(),e(28,"div",18)(29,"button",19),s(30,"Ingresar"),i()()()()()),o&2&&(a(4),l("ngIf",t.error),a(),l("formGroup",t.form),a(12),l("type",t.passwordVisible?"text":"password"),a(3),C("aria-label",t.passwordVisible?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),a(),l("ngIf",!t.passwordVisible),a(),l("ngIf",t.passwordVisible),a(7),l("disabled",t.form.invalid))},dependencies:[L,y,z,A,E,F,T,M,I,N],encapsulation:2})};export{B as LoginComponent};
