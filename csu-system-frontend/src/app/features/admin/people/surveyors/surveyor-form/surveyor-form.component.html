<section class="section">
  <div class="container">
    <h1 class="title">{{ isEdit ? 'Editar encuestador' : 'Nuevo encuestador' }}</h1>

    <div *ngIf="error" class="notification is-danger">{{ error }}</div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <app-person-form-base
        [form]="form"
        [submitted]="submitted"
        [maxDate]="maxBirthDate()">
      </app-person-form-base>

      <!-- DNI -->
      <div class="field">
        <label class="label">DNI</label>
        <div class="control">
          <input
            class="input"
            type="text"
            formControlName="dni"
            [ngClass]="{ 'is-danger': fieldInvalid('dni') }" />
        </div>
        <p class="help is-danger" *ngIf="fieldInvalid('dni')">{{ getError('dni') }}</p>
      </div>

      <!-- Género -->
      <div class="field">
        <label class="label">Género</label>
        <div class="control">
          <div class="select is-fullwidth" [ngClass]="{ 'is-danger': fieldInvalid('gender') }">
            <select formControlName="gender">
              <option [ngValue]="null" disabled>Seleccionar...</option>
              <option *ngFor="let g of genders" [value]="g.value">{{ g.label }}</option>
            </select>
          </div>
        </div>
        <p class="help is-danger" *ngIf="fieldInvalid('gender')">{{ getError('gender') }}</p>
      </div>

      <!-- Ocupación -->
      <div class="field">
        <label class="label">Ocupación</label>
        <div class="control">
          <div class="select is-fullwidth" [ngClass]="{ 'is-danger': fieldInvalid('occupation') }">
            <select formControlName="occupation">
              <option [ngValue]="null" disabled>Seleccionar...</option>
              <option *ngFor="let o of occupations" [value]="o.value">{{ o.label }}</option>
            </select>
          </div>
        </div>
        <p class="help is-danger" *ngIf="fieldInvalid('occupation')">{{ getError('occupation') }}</p>
      </div>

      <div class="field mt-4">
        <div class="buttons">
          <button class="button is-primary" type="submit" [disabled]="form.invalid">
            {{ isEdit ? 'Actualizar' : 'Crear' }}
          </button>
          <button type="button" class="button is-danger" (click)="cancel()">Cancelar</button>
        </div>
      </div>
    </form>
  </div>
</section>
